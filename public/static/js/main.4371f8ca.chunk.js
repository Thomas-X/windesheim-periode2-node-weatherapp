(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(49)},24:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),l=(a(24),a(2)),u=a.n(l),s=a(3),i=a(5),m=a(6),d=a(8),h=a(7),p=a(9),y=a(4),f=a.n(y),E=a(18),v=a.n(E),b=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={loaded:null,data:null,currentMonth:null,currentYear:null,historyData:null,historyDataLoaded:null,months:[{name:"january",count:"01"},{name:"february",count:"02"},{name:"march",count:"03"},{name:"april",count:"04"},{name:"may",count:"05"},{name:"june",count:"06"},{name:"july",count:"07"},{name:"august",count:"08"},{name:"september",count:"09"},{name:"october",count:"10"},{name:"november",count:"11"},{name:"december",count:"12"}],years:[]},a.getData=Object(s.a)(u.a.mark(function e(){var t,n,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.country,r=t.city,e.next=3,f.a.get("http://localhost:3000/api/v1/current/".concat(n.code.toLowerCase(),"/").concat(r.toLowerCase()));case 3:c=e.sent.data,a.setState({data:c,loaded:!0});case 5:case"end":return e.stop()}},e,this)})),a.checkIfShouldUpdate=Object(s.a)(u.a.mark(function e(){var t,n,r,c,o,l,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.currentYear,r=t.currentMonth,c=a.props,o=c.city,l=c.country,!r||!n){e.next=8;break}return a.setState({historyDataLoaded:"loading"}),e.next=6,f.a.get("/api/v1/history/".concat(l.code.toLowerCase(),"/").concat(o.toLowerCase(),"/").concat(n,"/").concat(r));case 6:s=e.sent.data,a.setState({historyData:s,historyDataLoaded:"loaded"});case 8:case"end":return e.stop()}},e,this)})),a.onYearChange=function(e){a.setState({currentYear:e.target.value},function(){a.checkIfShouldUpdate()})},a.onMonthChange=function(e){a.setState({currentMonth:e.target.value},function(){a.checkIfShouldUpdate()})};for(var n=[],r=1900;r<(new Date).getFullYear()+1;r++)n.push(r);return a.state.years=n.slice(0),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData().then(function(){return console.log("mounted!")})}},{key:"render",value:function(){var e=this,t=this.props,a=t.city,n=t.country,c=this.state,o=c.loaded,l=c.data,u=(c.currentMonth,c.currentYear,c.years),s=c.months,i=c.historyData,m=c.historyDataLoaded;return o?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h1",{className:"display-3"},l.avgTemperature,"\xb0 in ",n.country.name,", ",a),r.a.createElement("h5",{className:"text-muted"},r.a.createElement("i",null,"Low: ",l.minTemperature,r.a.createElement("br",null),"High: ",l.maxTemperature)),r.a.createElement("br",null),r.a.createElement("h1",null,"Stats"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("label",null,"Year"),r.a.createElement("select",{className:"form-control",onChange:function(t){return e.onYearChange(t)}},r.a.createElement("option",{disabled:!0,selected:!0}," -- select an option --"),u.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("div",{className:"col-sm-12 col-md-6"},r.a.createElement("label",null,"Month"),r.a.createElement("select",{className:"form-control",onChange:function(t){return e.onMonthChange(t)}},r.a.createElement("option",{disabled:!0,selected:!0}," -- select an option --"),s.map(function(e,t){return r.a.createElement("option",{key:t,value:e.count},e.name)})))),r.a.createElement("br",null),"loading"===m&&r.a.createElement("h4",null,"loading.."),!!i&&"loaded"===m&&r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Minimum"),r.a.createElement("th",{scope:"col"},"Average"),r.a.createElement("th",{scope:"col"},"Maximum"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,i.min),r.a.createElement("td",null,i.avg),r.a.createElement("td",null,i.max)))))):"loading.."}}]),t}(n.Component),g=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={selectedCountry:{country:{name:"none"}},selectedCity:"none",data:{countries:[]}},a.getData=Object(s.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://localhost:3000/api/v1/countries-cities");case 2:t=e.sent.data,a.setState({data:{countries:t}});case 4:case"end":return e.stop()}},e,this)})),a.onCountryChange=function(e){a.setState({selectedCountry:{country:v.a.omit(a.state.data.countries.filter(function(t,a){return!!t&&t.code===e.target.value})[0],["code"]),code:e.target.value},selectedCity:"none"})},a.onCityChange=function(e){a.setState({selectedCity:e.target.value})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData().then(function(){return console.log("data set!")}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this,t=this.state.data.countries,a=this.state,n=a.selectedCountry,c=a.selectedCity;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",{className:"display-4"},"Weather App"),r.a.createElement("p",null,"Only the country / city combination of: Netherlands, Amsterdam. Has been tested")),r.a.createElement("label",null,"Country selector"),r.a.createElement("br",null),r.a.createElement("select",{className:"form-control",onChange:function(t){return e.onCountryChange(t)}},r.a.createElement("option",{disabled:!0,selected:!0}," -- select an option --"),t.map(function(e,t){return e?r.a.createElement("option",{key:t,value:e.code},e.name):null})),r.a.createElement("br",null),!!n.country.cities&&n.country.cities.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"City selector"),r.a.createElement("select",{value:c,className:"form-control",onChange:function(t){return e.onCityChange(t)}},r.a.createElement("option",{value:"none",disabled:!0,selected:!0}," -- select an option --"),n.country.cities.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("br",null),r.a.createElement("br",null),"none"!==c&&r.a.createElement(b,{city:c,country:n}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,2,1]]]);
//# sourceMappingURL=main.4371f8ca.chunk.js.map